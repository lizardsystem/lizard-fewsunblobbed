<li class="node">
  <div class="hitarea">
    <a href="{% url fews_browser %}?filterkey={{ node.id }}"
       class="file">
      <span class="folder">{{node.data.name}}</span>
    </a>
  </div>
  <ul>
    {% for child in node.children %}
      {% if child.data.isendnode %}
        <li class="leaf">
          {% if child.data.has_parameters %}
          <a href="{% url fews_browser %}?filterkey={{ child.id }}"
             class="file">
            {{ child.data.name }}
          </a>
          {% else %}
          <span class="quiet">{{ child.data.name }}</span>
          {% endif %}
        </li>
      {% else %}
        {% with "lizard_fewsunblobbed/fews_browser_tree_snippet.html" as ourselves %}
          {% with child as node %}
            {% include ourselves %}
          {% endwith %}
        {% endwith %}
      {% endif %}
    {% endfor %}
  </ul>
</li>
